<app-confirm-dialog></app-confirm-dialog>

<div class="main-container">
  <div class="container">
    <app-store-project
      [showInput2]="false"
      [showInput1]="false"
      [componentName]="componentName"
      [hide]="false"
    ></app-store-project>
  </div>
  <div class="">
    <div class="row">
      <form class="col-lg-12 col-md-12 col-sm-12" [formGroup]="form">
        <div class="card-wrapper">
          <div class="row align-items-center">
            <div class="col-lg-12 col-md-12 col-sm-12">
              <div class="row align-items-stretch">
                <div class="col-lg-3 col-md-6 col-sm-12 mb-3">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Company Code
                    <span class="astrik">*</span>
                  </label>
                  <ng-container *ngIf="!isUpdate">
                    <input
                      type="number"
                      class="form-control text-xs"
                      placeholder="Company Code"
                      formControlName="CompanyCode"
                      name="CompanyCode"
                    />
                  </ng-container>
                  <ng-container *ngIf="isUpdate">
                    <input
                      type="number"
                      class="form-control text-xs"
                      placeholder="Enter Company Code "
                      formControlName="CompanyCode"
                      name="CompanyCode"
                      [attr.readonly]="isUpdate"
                    />
                  </ng-container>
                </div>

                <div class="col-lg-3 col-md-6 col-sm-12 mb-3">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Company Name
                    <span class="astrik">*</span>
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter Company Name "
                    formControlName="CompanyName"
                    name="CompanyName"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['CompanyName'].invalid &&
                      form.controls['CompanyName'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>

                <div class="col-lg-3 col-md-6 col-sm-12 mb-3">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Short Name
                    <span class="astrik">*</span>
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter Short Name"
                    formControlName="ShortName"
                    name="ShortName"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['ShortName'].invalid &&
                      form.controls['ShortName'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12 mb-3">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Address
                    <span class="astrik">*</span>
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter Address "
                    formControlName="Address"
                    name="Address"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['Address'].invalid &&
                      form.controls['Address'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
              </div>
              <div class="row align-items-stretch">
                <div class="col-lg-3 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Phone No
                    <span class="astrik">*</span>
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter Phone No "
                    formControlName="PhoneNo"
                    name="PhoneNo"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['PhoneNo'].invalid &&
                      form.controls['PhoneNo'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Email Address
                    <span class="astrik">*</span>
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter Email Address"
                    formControlName="EmailAddress"
                    name="EmailAddress"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['EmailAddress'].invalid &&
                      form.controls['EmailAddress'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >ST Registration No
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter ST Registration No "
                    formControlName="STRegistrationNo"
                    name="STRegistrationNo"
                  />
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >NTN
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter NTN "
                    formControlName="NTN"
                    name="NTN"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['NTN'].invalid &&
                      form.controls['NTN'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
              </div>
              <div class="row align-items-stretch mt-3">
                <div class="col-lg-3 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Title Of Tax
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    placeholder="Enter Title Of Tax "
                    formControlName="TitleOfTax"
                    name="TitleOfTax"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['TitleOfTax'].invalid &&
                      form.controls['TitleOfTax'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
                <div class="col-lg-3 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >GST
                  </label>
                  <input
                    type="number"
                    class="form-control text-xs"
                    placeholder="Enter GST "
                    formControlName="GST"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['GST'].invalid &&
                      form.controls['GST'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1"
                    >Language <span class="astrik">*</span>
                  </label>
                  <div class="">
                    <div class="d-block">
                      <div class="mb-3">
                        <select
                          class="form-select"
                          (change)="changeLanguage($event)"
                          formControlName="LanguageId"
                        >
                          <option
                            *ngFor="let b of Language"
                            [ngValue]="b"
                            [value]="b?.LanguageId"
                          >
                            {{ b.Language }}
                          </option>
                        </select>
                        <div
                          class="error-field"
                          *ngIf="
                            form.controls['LanguageId'].invalid &&
                            form.controls['LanguageId'].touched
                          "
                        >
                          Field Required
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-12 mb-3">
                  <label class="float-md-left d-flex float-sm-left mb-1 ml-1"
                    >Attendify Id
                    <span class="astrik">*</span>
                  </label>
                  <input
                    type="text"
                    class="form-control text-xs"
                    formControlName="AttendifyCompanyId"
                  />
                  <div
                    class="error-field"
                    *ngIf="
                      form.controls['AttendifyCompanyId'].invalid &&
                      form.controls['AttendifyCompanyId'].touched
                    "
                  >
                    Field Required
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-12">
                  <label class="float-md-left d-flex float-sm-left mb-1"
                    >Date Format <span class="astrik">*</span>
                  </label>
                  <div class="group-gap">
                    <div class="d-block">
                      <div class="mb-3">
                        <select
                          (change)="dateChange()"
                          formControlName="DateFormatCode"
                          class="form-select"
                        >
                          <option
                            *ngFor="let format of dateFormats"
                            [value]="format"
                          >
                            {{ format }}
                          </option>
                        </select>
                        <div
                          class="error-field"
                          *ngIf="
                            form.controls['DateFormatCode'].invalid &&
                            form.controls['DateFormatCode'].touched
                          "
                        >
                          Field Required
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-12 justify-content-center">
                  <div class="checkbox">
                    <input
                      type="checkbox"
                      class="form-checkbox"
                      formControlName="IsActive"
                      name="Active"
                    />
                    <label class="form-check-label" for="jd">Active </label>
                  </div>
                </div>
              </div>
              <div class="row align-items-stretch">
                <div class="col-sm-4"></div>
                <div
                  class="row justify-content-center"
                  style="align-items: flex-end"
                >
                  <ng-container>
                    <Button
                      type="button"
                      id="btnsave"
                      Class="btn btn-outline-success mx-1 btnFix"
                      (click)="addorUpdate()"
                      >Update</Button
                    >
                  </ng-container>
                  <Button
                    type="button"
                    id="btnRefresh"
                    class="btn primary-button-color mx-1 btnFix"
                    (click)="refresh()"
                    >Refresh</Button
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="row mt-3">
      <div class="col-lg-12 col-md-12 col-sm-12">
        <div class="table-responsive card-wrapper custom-table">
          <p-table
            [value]="tableResponse"
            *ngIf="tableResponse.length > 0"
            [paginator]="true"
            [alwaysShowPaginator]="false"
            [rows]="4"
            class="datatable-width"
            styleClass="p-datatable-sm"
            responsiveLayout="stack"
            [breakpoint]="'960px'"
            [rowHover]="true"
            [globalFilterFields]="['CompanyCode']"
          >
            <ng-template pTemplate="header">
              <tr>
                <th pSortableColumn="CompanyCode">
                  Company Code<p-sortIcon field="CompanyCode"></p-sortIcon>
                </th>
                <th>Company Name</th>
                <th>Short Name</th>
                <th>Phone No</th>
                <th>Email Address</th>
                <th>Active</th>
                <th>Action</th>
              </tr>
              <tr>
                <td colspan="7">
                  <hr />
                </td>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-m>
              <tr>
                <td>
                  <span class="ml-2">{{ m.CompanyCode }}</span>
                </td>
                <td>
                  <span class="ml-2">{{ m.CompanyName | ellipsis : 30 }}</span>
                </td>
                <td>
                  <span class="ml-2">{{ m.ShortName }}</span>
                </td>
                <td>
                  <span class="ml-2">{{ m.PhoneNo }}</span>
                </td>
                <td>
                  <span class="ml-2">{{ m.EmailAddress | ellipsis : 30 }}</span>
                </td>
                <td>
                  <span
                    [class]="
                      m.IsActive == true ? 'success-badge' : 'danger-badge'
                    "
                    >{{ m.IsActive | yesNo }}</span
                  >
                </td>
                <td>
                  <button
                    pButton
                    icon="pi pi-pencil"
                    class="p-button p-button-outlined p-button-rounded p-button-success p-mr-2 mx-1 custom-button-success"
                    (click)="getSelectedRow(m)"
                  ></button>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
    </div>
  </div>
</div>
