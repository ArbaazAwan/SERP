<ngx-loading-bar [includeSpinner]="false" [height]="'3px'"></ngx-loading-bar>
<!-- <p-confirmDialog #cd [style]="{ width: '30vw' }">
  <ng-template pTemplate="footer">
    <button type="button" pButton icon="pi pi-times" label="No" class="p-button-success" (click)="cd.reject()"></button>
    <button type="button" pButton icon="pi pi-check" label="Yes" class="p-button-danger" (click)="cd.accept()"></button>
  </ng-template>
</p-confirmDialog> -->

<div class="container">
  <div class="row" style="font-size: small">
    <form
      class="col-lg-12 col-md-12 col-sm-12"
      [formGroup]="addNewItemform"
      (ngSubmit)="onSubmit()"
    >
      <div class="">
        <!-- Inventory Item infor  -->
        <div class="row mb-3">
          <div class="col-lg-9">
            <div class="row">
              <div class="col-lg-12">
                <h3 class="form-section-title">Inventory Item Information</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-3 col-md-6 col-sm-12">
                <div class="form-group">
                  <label for="description" class=""
                    >Parent Item Code <span class="astrik">*</span></label
                  >
                  <ng-container>
                    <p-dropdown
                      appendTo="body"
                      [options]="parentCodeResponse$"
                      [filter]="true"
                      optionLabel="ItemName"
                      optionValue="ItemCode"
                      filterBy="ItemName"
                      placeholder="Select Parent"
                      formControlName="ParentItemCode"
                      [panelStyle]="{ overflow: 'auto' }"
                      [showClear]="true"
                      (onChange)="changeParentCode($event)"
                    >
                      <ng-template let-option pTemplate="item">
                        <div class="option-item">
                          <div class="option-column1">
                            {{ option.ItemCode }}
                          </div>
                          <div class="option-column2">
                            {{ option.ItemName }}
                          </div>
                        </div>
                      </ng-template>
                    </p-dropdown>
                  </ng-container>
                  <!-- <ng-container *ngIf="isUpdate">
                    <input
                      type="text"
                      class="form-control"
                      [(ngModel)]="parentwithName"
                      [ngModelOptions]="{ standalone: true }"
                      [attr.disabled]="true"
                    />
                  </ng-container> -->
                </div>
              </div>

              <div class="col-lg-3 col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="float-left"
                    >Item Name <span class="astrik">*</span></label
                  >
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Item Name"
                    formControlName="ItemName"
                    required
                  />
                </div>
              </div>


              <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="form-group">
                  <label class="float-left">Item Upload</label>
                  <input
                    type="file"
                    class="form-control"
                    id="fileUpload"
                    formControlName="ItemImagePath"
                    (change)="selectFiles($event)"
                    accept="image/jpeg, image/png, image/gif, application/pdf, image/x-eps, image/webp"
                  />
                  <!-- <div *ngIf="model.ItemImagePath">
                    <p>Current File: {{ getFileName() }}</p>
                  </div> -->
                </div>
              </div>

              <div class="col-lg-2 col-md-6 col-sm-12 align-self-center">
                <div class="checkbox">
                  <input
                    type="checkbox"
                    class="form-checkbox"
                    formControlName="isActive"
                    name="isActive"
                  />
                  <label class="form-check-label">Active</label>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-3 align-self-center">
            <div class="d-flex justify-content-center">
              <div *ngIf="uploadedImages.length > 0" class="img-wrapper">
                <img
                  [src]="uploadedImages[0].url"
                  alt="Uploaded Image"
                  class="custom-img"
                />
              </div>
              <div
                *ngIf="!uploadedImages.length && imageData"
                class="img-wrapper"
              >
                <img [src]="displayImage()" alt="Image" class="custom-img" />
              </div>
            </div>
          </div>
        </div>

        <!-- Basic Info  -->
        <div class="row mb-3">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="row">
              <div class="col-lg-12">
                <h3 class="form-section-title">Basic Information</h3>
              </div>
            </div>
          </div>
          <!-- <div class="col-lg-12 col-md-12 col-sm-12"> -->
          <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label>Item Type </label>
                <div class="d-flex align-items-center gap-1 w-100">
                  <p-dropdown
                    appendTo="body"
                    class="dropdownWidth"
                    [options]="typeDropDown"
                    [filter]="true"
                    optionLabel="ItemType"
                    optionValue="ItemTypeCode"
                    filterBy="ItemType"
                    placeholder="Item Type"
                    formControlName="ItemTypeCode"
                    [panelStyle]="{ overflow: 'auto' }"
                    [showClear]="true"
                    (onChange)="changeType($event)"
                  >
                  </p-dropdown>
                  <button class="btn-dropdown" (click)="openNewType()">
                    <img src="../../.././../assets/icons/plus.svg" alt="" />
                  </button>
                </div>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label class="float-left">Store </label>
                <p-multiSelect
                  [style]="{ height: '30px' }"
                  formControlName="stores"
                  [(ngModel)]="selectedStores" 
                  [options]="storeResponse$"
                  optionLabel="StoreName"
                  placeholder="Select Store"
                  [maxSelectedLabels]="1"
                  [selectedItemsLabel]="'{0} items selected'"
                >
                </p-multiSelect>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label class="float-left">Min Level </label>
                <input
                  type="number"
                  class="form-control"
                  placeholder="Min Level"
                  formControlName="MinLevel"
                />
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label class="float-left">Max Level </label>
                <input
                  type="number"
                  class="form-control"
                  placeholder="Max Level"
                  formControlName="MaxLevel"
                />
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label>Size</label>
                <div class="d-flex align-items-center gap-1">
                  <p-dropdown
                    appendTo="body"
                    class="dropdownWidth"
                    [options]="sizeDropDown"
                    [filter]="true"
                    optionLabel="ItemSize"
                    optionValue="ItemSizeCode"
                    filterBy="ItemSize"
                    placeholder="Select Size"
                    formControlName="ItemSizeCode"
                    [panelStyle]="{ overflow: 'auto' }"
                    [showClear]="true"
                    (onChange)="changeSize($event)"
                  >
                  </p-dropdown>

                  <button class="btn-dropdown" (click)="openNewSize()">
                    <img src="../../.././../assets/icons/plus.svg" alt="" />
                  </button>
                </div>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label>Sale Price </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Sale Price"
                  formControlName="SalePrice"
                />
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12" style="text-align: left">
              <div class="form-group">
                <label class="float-left">Tax Title </label>
                <p-multiSelect
                  [options]="TaxResponse$"
                  placeholder="Select Tax Title"
                  optionLabel="TaxTitle"
                  formControlName="items"
                  [maxSelectedLabels]="1"
                  [selectedItemsLabel]="'{0} items selected'"
                  [(ngModel)]="selectedTexas"
                ></p-multiSelect>
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label>Registration# </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Registration No."
                  formControlName="RegistrationNo"
                  required
                />
              </div>
            </div>

            <div class="col-lg-3 col-md-3 col-sm-12">
              <div class="form-group">
                <label>Serial# </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Serial No."
                  formControlName="ItemSrNo"
                />
              </div>
            </div>
          </div>
          <!-- </div> -->
        </div>

        <!-- More Information -->
        <div class="row mb-3">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <h3 class="form-section-title">More Information</h3>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label>Manufacturer</label>
              <div class="d-flex align-items-center gap-1 w-100">
                <p-dropdown
                  appendTo="body"
                  class="dropdownWidth"
                  [options]="manufacturerDropDown"
                  [filter]="true"
                  optionLabel="ItemManufacturer"
                  optionValue="ItemManufacturerCode"
                  filterBy="ItemManufacturer"
                  placeholder="Manufacturer"
                  formControlName="ItemManufacturerCode"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeManufacturer($event)"
                >
                </p-dropdown>
                <button class="btn-dropdown" (click)="openNewManufacturer()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label class="float-left">UPC </label>
              <input
                type="text"
                class="form-control"
                placeholder="Enter Barcode "
                formControlName="UPC"
              />
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label>Unit<span class="astrik">*</span></label>
              <div class="d-flex align-items-center gap-1">
                <p-dropdown
                  appendTo="body"
                  class="dropdownWidth"
                  [options]="unitDropDown"
                  [filter]="true"
                  optionLabel="ShortName"
                  optionValue="ItemUnitCode"
                  filterBy="ShortName"
                  placeholder="Select Unit"
                  formControlName="ItemUnitCode"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeUnit($event)"
                >
                </p-dropdown>
                <button class="btn-dropdown" (click)="openNewUnit()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label> Colour </label>
              <div class="d-flex align-items-center gap-1">
                <p-dropdown
                  class="dropdownWidth"
                  [options]="colourDropDown"
                  [filter]="true"
                  optionLabel="ItemColour"
                  optionValue="ItemColourCode"
                  filterBy="ShortName"
                  placeholder="Select Colour"
                  formControlName="ItemColourCode"
                  appendTo="body"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeColour($event)"
                >
                </p-dropdown>

                <button class="btn-dropdown" (click)="openNewColour()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label> Category </label>
              <div class="d-flex align-items-center gap-1">
                <p-dropdown
                  class="dropdownWidth"
                  [options]="categoryDropDown"
                  [filter]="true"
                  optionLabel="ItemCategory"
                  optionValue="ItemCategoryCode"
                  filterBy="ItemCategory"
                  placeholder="Select Category"
                  formControlName="ItemCategoryCode"
                  appendTo="body"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeCategory($event)"
                >
                </p-dropdown>
                <button class="btn-dropdown" (click)="openNewCategory()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label> Grade </label>
              <div class="d-flex align-items-center gap-1">
                <p-dropdown
                  class="dropdownWidth"
                  [options]="gradeDropDown"
                  [filter]="true"
                  optionLabel="ItemGrade"
                  optionValue="ItemGradeCode"
                  filterBy="ItemGrade"
                  placeholder="Select Grade"
                  formControlName="ItemGradeCode"
                  appendTo="body"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeGrade($event)"
                >
                </p-dropdown>

                <button class="btn-dropdown" (click)="openNewGrade()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label> Brand </label>
              <div class="d-flex align-items-center gap-1">
                <p-dropdown
                  class="dropdownWidth"
                  [options]="brandDropDown"
                  [filter]="true"
                  optionLabel="ItemBrand"
                  optionValue="ItemBrandCode"
                  filterBy="ItemBrand"
                  placeholder="Select Brand"
                  formControlName="ItemBrandCode"
                  appendTo="body"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeBrand($event)"
                >
                </p-dropdown>
                <button class="btn-dropdown" (click)="openNewBrand()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label> Model </label>
              <div class="d-flex align-items-center gap-1">
                <p-dropdown
                  class="dropdownWidth"
                  [options]="modelDropDown"
                  [filter]="true"
                  optionLabel="ItemModel"
                  optionValue="ItemModelCode"
                  filterBy="ItemModel"
                  placeholder="Select Model"
                  formControlName="ItemModelCode"
                  appendTo="body"
                  [panelStyle]="{ overflow: 'auto' }"
                  [showClear]="true"
                  (onChange)="changeModel($event)"
                >
                </p-dropdown>
                <button class="btn-dropdown" (click)="openNewModel()">
                  <img src="../../../../assets/icons/plus.svg" alt="" />
                </button>
              </div>
            </div>
          </div>

          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="form-group">
              <label>Remarks </label>
              <input
                type="text"
                class="form-control"
                placeholder="Enter Remarks "
                formControlName="Remarks"
              />
            </div>
          </div>

          <div class="col-lg-1 col-md-12 col-sm-12">
            <div class="checkbox">
              <input
                type="checkbox"
                (change)="updateCheckboxCap()"
                class="form-checkbox"
                formControlName="IsCapex"
                name="IsCapex"
                [(ngModel)]="IsCapex"
                [disabled]="IsUpdate"
              />
              <label class="form-check-label">Capex</label>
            </div>
          </div>

          <div class="col-lg-1 col-md-12 col-sm-12">
            <div class="checkbox">
              <input
                type="checkbox"
                (change)="updateCheckboxOp()"
                class="form-checkbox"
                formControlName="IsOpex"
                name="IsOpex"
                [(ngModel)]="IsOpex"
                [disabled]="IsUpdate"
              />
              <label class="form-check-label"> Opex </label>
            </div>
          </div>

        </div>

        <!-- GL confirmation  -->
        <div class="row mb-3">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <h3 class="form-section-title">Accounts and Assets Information</h3>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label>COA Head </label>
              <p-dropdown
                [style]="{ height: '30px', width: '100%' }"
                [options]="account"
                [filter]="true"
                optionLabel="AccountName"
                optionValue="AccountCode"
                filterBy="AccountName,AccountCode"
                formControlName = "AccountCode"
                [showClear]="false"
                placeholder="Select COAHead"
                [panelStyle]="{ overflow: 'auto' }"
                [showClear]="true"
                appendTo="body"
              >
                <ng-template let-option pTemplate="item">
                  <div class="option-item">
                    <!-- <div style="float: left; width: 30%">
                      {{ option.AccountCode }}
                    </div> -->
                    <div style="float: left; width: 70%">
                      {{ option.AccountName }}
                    </div>
                  </div>
                </ng-template>
              </p-dropdown>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label>Income </label>
              <p-dropdown
                [style]="{ height: '30px', width: '100%' }"
                [options]="account"
                [filter]="true"
                optionLabel="AccountName"
                formControlName="Income"
                optionValue="AccountCode"
                filterBy="AccountName,AccountCode"
                [showClear]="false"
                placeholder="Select Income"
                [panelStyle]="{ overflow: 'auto' }"
                [showClear]="true"
                appendTo="body"
              >
                <ng-template let-option pTemplate="item">
                  <div class="option-item">
                    <!-- <div style="float: left; width: 30%">
                    {{ option.AccountCode }}
                  </div> -->
                    <div style="float: left; width: 70%">
                      {{ option.AccountName }}
                    </div>
                  </div>
                </ng-template>
              </p-dropdown>
            </div>
          </div>

          <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="form-group">
              <label>Asset </label>
              <p-dropdown
                [style]="{ height: '30px', width: '100%' }"
                [options]="aasets"
                [filter]="true"
                optionLabel="AssetName"
                optionValue="AssetCode"
                filterBy="AssetName,AssetCode"
                [showClear]="false"
                placeholder="Select Asset"
                [panelStyle]="{ overflow: 'auto' }"
                [showClear]="true"
                appendTo="body"
                formControlName="Asset"
              >
                <ng-template let-option pTemplate="item">
                  <div class="option-item">
                    <!-- <div style="float: left; width: 30%">
                      {{ option.AccountCode }}
                    </div> -->
                    <div style="float: left; width: 70%">
                      {{ option.AssetName }}
                    </div>
                  </div>
                </ng-template>
              </p-dropdown>
            </div>
          </div>
        </div>

        <!-- Misc & Shipping  -->

        <div class="row mb-3">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <h3 class="form-section-title">Misc & Shipping</h3>
          </div>

          <div class="col-lg-3">
            <div class="checkbox-wrapper">
              <div class="checkbox">
                <input
                  class="form-checkbox"
                  type="checkbox"
                  id="print"
                  formControlName="PrintTags"
                />
                <label class="form-check-label" for="print">Print Tags</label>
              </div>

              <div class="checkbox">
                <input
                  class="form-checkbox"
                  type="checkbox"
                  id="unorder"
                  formControlName="Unorderable"
                />
                <label class="form-check-label" for="unorder"
                  >Un Orderable</label
                >
              </div>

              <div class="checkbox">
                <input
                  class="form-checkbox"
                  type="checkbox"
                  id="serial"
                  formControlName="UseSerial"
                />
                <label class="form-check-label" for="serial">Use Serial</label>
              </div>

              <div class="checkbox">
                <input
                  class="form-checkbox"
                  type="checkbox"
                  id="earncomm"
                  formControlName="EarnCommission"
                />
                <label class="form-check-label" for="earncomm"
                  >Earn Commission</label
                >
              </div>

              <div class="checkbox">
                <input
                  class="form-checkbox"
                  type="checkbox"
                  id="earnAward"
                  formControlName="EarnRewards"
                />
                <label class="form-check-label" for="earnAward"
                  >Earn Rewards</label
                >
              </div>
            </div>
          </div>
          <div class="col-lg-9">
            <div class="row">
              <div class="col-lg-5 col-md-5 col-sm-12">
                <div class="form-group">
                  <label class="mb-1">Shipping Weight </label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Enter Weight"
                    formControlName="ShippingWeight"
                    min="0"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-5 col-md-5 col-sm-12">
                <div class="form-group">
                  <label class="mb-1">Shipping Height </label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Enter Height"
                    formControlName="ShippingHeight"
                    min="0"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-5 col-md-5 col-sm-12">
                <div class="form-group">
                  <label class="mb-1">Shipping Length </label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Enter Length"
                    formControlName="ShippingLength"
                    min="0"
                    required
                  />
                </div>
              </div>
              <div class="col-lg-5 col-md-5 col-sm-12">
                <div class="form-group">
                  <label class="mb-1">Shipping Width </label>
                  <input
                    type="number"
                    class="form-control"
                    placeholder="Enter Width"
                    formControlName="ShippingWidth"
                    min="0"
                    required
                  />
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Buttons-Start -->
        <div class="row">
          <div class="d-flex align-items-center gap-2">
            <button
              *ngIf="isUpdate"
              type="button"
              id="btnsave"
              Class="btn-save"
              (click)="openNewReceipe()"
            >
              Receipe
            </button>
            <!-- (click)="addorUpdate()" -->
            <button
              type="submit"
              id="btnsave"
              Class="btn-save"
              [disabled]="isUpdate"
            >
              Save
            </button>
            <button
              type="button"
              id="btnsave"
              Class="btn-update"
              (click)="addorUpdate()"
              [disabled]="!isUpdate"
            >
              Update
            </button>
            <button
              type="button"
              id="btnRefresh"
              class="btn-refresh"
              (click)="onRefresh()"
            >
              <img src="../../../../assets/icons/btn-refresh.svg" alt="" />
            </button>
          </div>
        </div>

        <!-- Buttons-End -->
      </div>
    </form>
  </div>
</div>

<!-- item type form  -->
<form [formGroup]="formType">
  <p-dialog
    [(visible)]="innerDialogType"
    [style]="{ width: '450px', padding: '0' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label class="">Item Type <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                formControlName="ItemType"
                class="form-control"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-checkbox"
                id="active"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label" for="active">Active</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <div class="table-responsive custom-table">
            <table
              class="table table-striped table-borderless"
              *ngIf="!isLoadingData"
            >
              <thead>
                <tr>
                  <th scope="col">Code</th>
                  <th scope="col">Item Type</th>
                  <th scope="col">Active</th>
                  <th scope="col" class="text-center">Action</th>
                </tr>
              </thead>
              <hr />
              <tbody>
                <tr
                  *ngFor="let item of typeResponse$; let odd = odd"
                  [ngClass]="{ 'odd-row': odd }"
                >
                  <td>{{ item.ItemTypeCode }}</td>
                  <td>{{ item.ItemType }}</td>
                  <td>
                    <span
                      [class]="
                        item.IsActive == true ? 'success-badge' : 'danger-badge'
                      "
                      >{{ item.IsActive | yesNo }}</span
                    >
                  </td>
                  <td>
                    <div class="dropdown text-center">
                      <button
                        class="three-dots"
                        type="button"
                        id="table-action-menu"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        <i class="fa fa-ellipsis-v"></i>
                      </button>
                      <ul
                        class="dropdown-menu"
                        aria-labelledby="table-action-menu"
                      >
                        <li>
                          <a
                            class="dropdown-item edit cursor-hover cursor-pointer"
                            (click)="getRowType(item)"
                            >Edit</a
                          >
                        </li>
                        <li>
                          <a
                            class="dropdown-item delete cursor-hover cursor-pointer"
                            (click)="deleteType(item.ItemTypeCode)"
                            >Delete</a
                          >
                        </li>
                      </ul>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="isLoadingData">
              <app-table-loader></app-table-loader>
            </div>
          </div>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDialogType()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        icon="pi pi-check"
        class="p-button-text"
        (click)="addorUpdateType()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<!-- item size form  -->
<form [formGroup]="formSize">
  <p-dialog
    [(visible)]="innerDialogSize"
    [style]="{ width: '450px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label class="">Item Size <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                formControlName="ItemSize"
                class="form-control"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-md-4 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-checkbox"
                id="sizeActive"
                formControlName="IsActive"
                autofocus
              />
            </ng-container>
            <label class="form-check-label" for="sizeActive"> Active </label>
          </div>
        </div>
      </div>

      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Code</th>
              <th scope="col">Item Size</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of sizeResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemSizeCode }}</td>
              <td>{{ item.ItemSize }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowSize(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteSize(item.ItemSizeCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDialogSize()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        icon="pi pi-check"
        class="p-button-text"
        (click)="addorUpdateSize()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<!-- Add Manufacturer form  -->
<form [formGroup]="formManufacturer">
  <p-dialog
    [(visible)]="innerDialogManufacturer"
    [style]="{ width: '550px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-lg-6">
          <div class="form-group">
            <label class="">Name <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ItemManufacturer"
                autofocus
                required
              />
            </ng-container>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="form-group">
            <label class="">Address <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="Address"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label class="">Phone Number <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="PhoneNumber"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                id="manufacturerActive"
                class="form-checkbox"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label" for="manufacturerActive"
              >Active</label
            >
          </div>
        </div>
      </div>
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Name</th>
              <th scope="col">Address</th>
              <th scope="col">Phone Number</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of manufacturerResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemManufacturer }}</td>
              <td>{{ item.Address }}</td>
              <td>{{ item.PhoneNumber }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowManufacturer(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteManufacturer(item.ItemManufacturerCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDialogManufacturer()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        icon="pi pi-check"
        class="p-button-text"
        (click)="addorUpdateManufacturer()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<!-- add unit item  -->
<form [formGroup]="formUnit">
  <p-dialog
    [(visible)]="innerDialogUnit"
    [style]="{ width: '500px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-5">
          <div class="form-group">
            <label>Item Unit <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ItemUnit"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>
        <div class="col-md-3">
          <div class="form-group">
            <label>Short Name <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ShortName"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-check-input mt-1 mr-2"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label"> Active </label>
          </div>
        </div>
      </div>
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Code</th>
              <th scope="col">Item Unit</th>
              <th scope="col">Short Name</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of unitResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemUnitCode }}</td>
              <td>{{ item.ItemUnit }}</td>
              <td>{{ item.ShortName }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowUnit(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteUnit(item.ItemUnitCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDialogUnit()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        icon="pi pi-check"
        class="p-button-text"
        (click)="addorUpdateUnit()"
      ></button>
    </ng-template>
  </p-dialog>

  <!-- this is Receipe form-->
  <p-dialog
    [(visible)]="innerDialogRec"
    [style]="{ width: '100%', height: '100%' }"
    [header]="receipeHeader"
    [modal]="true"
    styleClass="p-fluid dialog2"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <p-accordion [multiple]="true" [activeIndex]="[0]">
        <p-accordionTab header="Receipe">
          <form [formGroup]="receipeformMaster">
            <div class="row">
              <div class="col-lg-1 col-md-6 col-sm-12">
                <label class="">Receipe # </label>
                <ng-container>
                  <!-- <input
                      type="text"
                      class="form-control"
                      formControlName="RecCode"
                      [(ngModel)]="modelRec"
                      [attr.disabled]="isUpdate ? false : null"
                    /> -->
                  <input
                    type="text"
                    class="form-control"
                    formControlName="RecCode"
                    [(ngModel)]="table1DataMaster[0].RecipeCode"
                    [attr.disabled]="isUpdate ? false : null"
                  />
                </ng-container>
              </div>
              <div class="col-lg-1 col-md-6 col-sm-12" style="text-align: left">
                <label class="">Item # </label>
                <ng-container>
                  <!-- <input
                  type="text"
                  class="form-control"
                  placeholder="Item Code"
                  formControlName="ItemRecCode"
                  [(ngModel)]="model.ItemCode"
                  [attr.disabled]="isUpdate ? false : null"
                /> -->
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Item Code"
                    formControlName="ItemRecCode"
                    [(ngModel)]="table1DataMaster[0].ItemCode"
                    [attr.disabled]="isUpdate ? false : null"
                  />
                </ng-container>
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <label class="float-left">Item Name </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Item Name"
                  formControlName="ItemName"
                  [(ngModel)]="table1DataMaster[0].ItemName"
                  [attr.disabled]="isUpdate ? false : null"
                />
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <button class="btn btnCheckBox" (click)="Active()">
                  <div class="form-check form-check-inline">
                    <input
                      type="checkbox"
                      class="form-check-input mt-1"
                      formControlName="active"
                      name="active"
                      [(ngModel)]="table1DataMaster[0].IsActive"
                      style="float: left"
                    />
                    <label class="float-left mb-3 labelChk"> Active </label>
                  </div>
                </button>
              </div>

              <div class="col-lg-2 col-md-6 col-sm-12">
                <button class="btn btnCheckBox" (click)="Approved()">
                  <div class="form-check form-check-inline">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      formControlName="approved"
                      name="approved"
                      [(ngModel)]="table1DataMaster[0].IsApproved"
                      style="float: left"
                    />
                    <label class="float-left mb-3 labelChk"> Approved </label>
                  </div>
                </button>
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <label class="float-left">Total Cost </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Total Cost"
                  formControlName="TotalCost"
                  [(ngModel)]="table1DataMaster[0].TotalCost"
                />
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <label class="float-left">Remarks </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Remarks"
                  formControlName="recRemark"
                  [(ngModel)]="table1DataMaster[0].Remarks"
                />
              </div>
            </div>

            <div class="row align-items-stretch">
              <div class="col-sm-4"></div>
              <div
                class="row justify-content-center mt-2 mb-2"
                style="align-items: flex-end"
              >
                <ng-container>
                  <Button
                    type="button"
                    id="btnsave"
                    Class="btn btn-outline-success btnFix mx-1"
                    (click)="addorUpdateRecformMaster()"
                    >{{ updateMasterform }}</Button
                  >
                  <Button
                    type="button"
                    id="btnsave"
                    (click)="saveformEnable()"
                    Class="btn btn-outline-success btnFix"
                    >New</Button
                  >
                </ng-container>
                <Button
                  type="button"
                  id="btnRefresh"
                  class="btn primary-button-color mx-1 btnFix"
                  >Preview / Print</Button
                >
              </div>
            </div>
          </form>
        </p-accordionTab>
      </p-accordion>

      <p-accordion [multiple]="true" [activeIndex]="[0]">
        <p-accordionTab header="(BOM) Bill of Material">
          <form [formGroup]="receipeformMasterDetail">
            <div class="row align-items-stretch">
              <div class="col-lg-3 col-md-6 col-sm-12" style="text-align: left">
                <label for="description" class=""
                  >Item Code <span class="astrik">*</span></label
                >
                <ng-container>
                  <p-dropdown appendTo="body"  [style]="{ height: '30px' }" [options]="parentCodeResponse$" [filter]="true"
                    optionLabel="ItemName" optionValue="ItemCode" filterBy="ItemName" placeholder="Select Items"
                    [panelStyle]="{ overflow: 'auto' }" [showClear]="true"
                    (onChange)="changeParentCodeMasterDetial($event)" [(ngModel)]="receipeMasterDetailModel.Itemcode">
                    <ng-template let-option pTemplate="item">
                      <div class="option-item">
                        <div class="option-column1">
                          {{ option.ItemCode }}
                        </div>
                        <div class="option-column2">
                          {{ option.ItemName }}
                        </div>
                      </div>
                    </ng-template>
                  </p-dropdown> -->
                </ng-container>
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <label class="float-left"
                  >Unit
                  <span class="astrik">*</span>
                </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Unit"
                  formControlName="unitRec"
                  [(ngModel)]="receipeMasterDetailModel.Unit"
                />
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <label class="float-left">Qty </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Qty"
                  formControlName="qtyRec"
                  [(ngModel)]="receipeMasterDetailModel.Qty"
                  required
                />
              </div>
              <div class="col-lg-2 col-md-6 col-sm-12">
                <label class="float-left">
                  Price
                  <span class="astrik">*</span>
                </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Price"
                  formControlName="priceRec"
                  [(ngModel)]="receipeMasterDetailModel.Price"
                  required
                />
                <div
                  *ngIf="
                    addNewItemform.controls['ShortName'].invalid &&
                    addNewItemform.controls['ShortName'].touched
                  "
                  style="color: red"
                >
                  Field Required
                </div>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-12">
                <label class="float-left">Remarks </label>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Enter Remarks"
                  formControlName="recRemark2"
                  [(ngModel)]="receipeMasterDetailModel.Remarks"
                />
              </div>
            </div>
            <div class="row align-items-stretch">
              <div class="col-sm-4"></div>
              <div
                class="row justify-content-center mt-2"
                style="align-items: flex-end"
              >
                <ng-container>
                  <Button
                    type="button"
                    id="btnsave"
                    Class="btn btn-outline-success btnFix mx-1"
                    (click)="addorUpdateMasterDetail()"
                    [disabled]="isupdateMasterDetail"
                    >Save</Button
                  >
                  <Button
                    type="button"
                    id="btnsave"
                    Class="btn btn-outline-success btnFix"
                    (click)="addorUpdateMasterDetail()"
                    [disabled]="!isupdateMasterDetail"
                    >update</Button
                  >
                </ng-container>
                <Button
                  type="button"
                  id="btnRefresh"
                  class="btn primary-button-color mx-1 btnFix"
                  (click)="onRefresh()"
                  >Refresh</Button
                >
              </div>
            </div>
          </form>
          <p-table
            #dt
            [value]="table2DataMasterDetails"
            [rows]="3"
            class="datatable-width"
            [paginator]="false"
            styleClass="p-datatable-sm"
            responsiveLayout="stack"
            [breakpoint]="'960px'"
            [rowHover]="true"
            dataKey="id"
            currentPageReportTemplate="{first} to {last} of {totalRecords} entries"
            [alwaysShowPaginator]="false"
            [showCurrentPageReport]="true"
          >
            <ng-template pTemplate="header">
              <tr>
                <th>RecipeCode#</th>
                <th>Itemcode</th>
                <th>ItemName</th>
                <th>ItemUnit</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Remarks</th>
                <th>Action</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-m>
              <tr>
                <td>{{ m.RecipeCode }}</td>
                <td>{{ m.Itemcode }}</td>
                <td>{{ m.ItemName }}</td>
                <td>{{ m.ItemUnit }}</td>
                <td>{{ m.Qty }}</td>
                <td>{{ m.Price }}</td>
                <td>{{ m.Remarks }}</td>
                <!-- <td>{{ m.IsActive | yesNo }}</td> -->
                <td>
                  <button
                    pButton
                    pRipple
                    icon="pi pi-pencil"
                    class="p-button p-button-outlined p-button-rounded p-button-warning GridEditButton mx-1"
                    (click)="getRowReceMasterDetail(m)"
                  ></button>
                  <button
                    pButton
                    pRipple
                    icon="pi pi-trash"
                    class="p-button p-button-outlined p-button-rounded p-button-danger GridDelButton mx-1"
                    (click)="deleteReceDetail(m.RecipeCode, m.Itemcode)"
                  ></button>
                </td>
              </tr>
            </ng-template>
          </p-table> </p-accordionTab
      ></p-accordion>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDialogUnit()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        icon="pi pi-check"
        class="p-button-text"
        (click)="addorUpdateUnit()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<!-- Color form  -->
<form [formGroup]="formColour">
  <p-dialog
    [(visible)]="innerDialogColour"
    [style]="{ width: '450px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label>Item Colour <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ItemColour"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-checkbox"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label"> Active </label>
          </div>
        </div>
      </div>
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Code</th>
              <th scope="col">Item Color</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of colourResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemColourCode }}</td>
              <td>{{ item.ItemColour }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowColour(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteColour(item.ItemColourCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        class="p-button-text"
        (click)="hideDialogColour()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        class="p-button-text"
        (click)="addorUpdateColour()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<!-- item category form -->
<form [formGroup]="formCategory">
  <p-dialog
    [(visible)]="innerDialogCategory"
    [style]="{ width: '450px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label class="">Item Category <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ItemCategory"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-checkbox"
                id="categoryActive"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label" for="categoryActive">
              Active
            </label>
          </div>
        </div>
      </div>
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Code</th>
              <th scope="col">Item Category</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of categoryResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemCategoryCode }}</td>
              <td>{{ item.ItemCategory }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowCategory(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteCategory(item.ItemCategoryCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideDialogCategory()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        icon="pi pi-check"
        class="p-button-text"
        (click)="addorUpdateCategory()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<form [formGroup]="formGrade">
  <p-dialog
    [(visible)]="innerDialogGrade"
    [style]="{ width: '450px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label>Item Grade <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ItemGrade"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-checkbox"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label">Active</label>
          </div>
        </div>
      </div>
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Code</th>
              <th scope="col">Item Grade</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of gradeResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemGradeCode }}</td>
              <td>{{ item.ItemGrade }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowGrade(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteGrade(item.ItemGradeCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        class="p-button-text"
        (click)="hideDialogGrade()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        class="p-button-text"
        (click)="addorUpdateGrade()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<form [formGroup]="formModel">
  <p-dialog
    [(visible)]="innerDialogModel"
    [style]="{ width: '450px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label class="">Item Model <span class="astrik">*</span></label>
            <ng-container *ngIf="!isInnerUpdate">
              <input
                type="text"
                class="form-control"
                formControlName="ItemModel"
                required
                autofocus
              />
            </ng-container>
            <ng-container *ngIf="isInnerUpdate">
              <input
                type="text"
                class="form-control"
                formControlName="ItemModel"
                [(ngModel)]="modelModel$.ItemModel"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container *ngIf="!isInnerUpdate">
              <input
                type="checkbox"
                class="form-checkbox"
                id="modalActive"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>

            <ng-container *ngIf="isInnerUpdate">
              <input
                type="checkbox"
                id="modalActive"
                class="form-checkbox"
                formControlName="IsActive"
                name="isActive"
                [(ngModel)]="modelModel$.IsActive"
              />
            </ng-container>

            <label class="form-check-label" for="modalActive"> Active </label>
          </div>
        </div>
      </div>
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <!-- <th scope="col">Code</th> -->
              <th scope="col">Item Modal</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of modelResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <!-- <td>{{item.ItemModelCode}}</td> -->
              <td>{{ item.ItemModel }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowModel(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteModel(item.ItemModelCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        class="p-button-text"
        (click)="hideDialogModel()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        class="p-button-text"
        (click)="addorUpdateModel()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<form [formGroup]="formBrand">
  <p-dialog
    [(visible)]="innerDialogBrand"
    [style]="{ width: '450px' }"
    [header]="innerHeader"
    [modal]="true"
    styleClass="p-fluid card-font"
    [closable]="true"
  >
    <ng-template pTemplate="content">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label>Item Brand <span class="astrik">*</span></label>
            <ng-container>
              <input
                type="text"
                class="form-control"
                formControlName="ItemBrand"
                required
                autofocus
              />
            </ng-container>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12 align-self-center">
          <div class="checkbox">
            <ng-container>
              <input
                type="checkbox"
                class="form-checkbox"
                id="brandActive"
                formControlName="IsActive"
                name="isActive"
              />
            </ng-container>
            <label class="form-check-label" for="brandActive"> Active </label>
          </div>
        </div>
      </div>
     
      <div class="table-responsive custom-table">
        <table
          class="table table-striped table-borderless"
          *ngIf="!isLoadingData"
        >
          <thead>
            <tr>
              <th scope="col">Code</th>
              <th scope="col">Item Brand</th>
              <th scope="col">Active</th>
              <th scope="col" class="text-center">Action</th>
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr
              *ngFor="let item of brandResponse$; let odd = odd"
              [ngClass]="{ 'odd-row': odd }"
            >
              <td>{{ item.ItemBrandCode }}</td>
              <td>{{ item.ItemBrand }}</td>
              <td>
                <span
                  [class]="
                    item.IsActive == true ? 'success-badge' : 'danger-badge'
                  "
                  >{{ item.IsActive | yesNo }}</span
                >
              </td>
              <td>
                <div class="dropdown text-center">
                  <button
                    class="three-dots"
                    type="button"
                    id="table-action-menu"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    <i class="fa fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu" aria-labelledby="table-action-menu">
                    <li>
                      <a
                        class="dropdown-item edit cursor-hover cursor-pointer"
                        (click)="getRowBrand(item)"
                        >Edit</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item delete cursor-hover cursor-pointer"
                        (click)="deleteBrand(item.ItemBrandCode)"
                        >Delete</a
                      >
                    </li>
                  </ul>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="isLoadingData">
          <app-table-loader></app-table-loader>
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Cancel"
        class="p-button-text"
        (click)="hideDialogBrand()"
      ></button>
      <button
        pButton
        pRipple
        [label]="innerBtn"
        class="p-button-text"
        (click)="addorUpdateBrand()"
      ></button>
    </ng-template>
  </p-dialog>
</form>

<!-- Response-Error-Message  -->
<div class="loading-newpopup" *ngIf="loadingerror">
  <div class="newpopup">
    <!---<a><img class="ErrorIcon" src="./assets/icon/error.svg" /></a>-->
    <div class="Errormessage">
      <p><strong>Error</strong></p>
      <p>You are not authorized to perform this Operation</p>
    </div>
    <button class="btn btn-danger ErrorClosebtn" (click)="hideErrorPopup()">
      Cancel
    </button>
  </div>
</div>
