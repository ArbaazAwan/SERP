<div class="main-container">
  <div class="col-lg-12 col-md-12 col-sm-12 mb-2 FormsHeading">
    <p class="mx-2 my-1">Lead List Report</p>
  </div>

  <div class="row">
    <form class="col-lg-12 col-md-12 col-sm-12" [formGroup]="form" novalidate>
      <div class="card p-3">
        <div class="row mb-2 d-flex align-items-center justify-content-center">
          <div class="col-lg-3 col-md-3">
            <label class="mr-2" for="Branch"
              >Branch <span class="astrik">*</span></label
            >
            <p-dropdown
              id="Branch"
              [options]="Branches"
              [filter]="true"
              formControlName="BranchCode"
              optionLabel="BranchName"
              filterBy="BranchName"
              [showClear]="true"
              placeholder="Select Branch"
              [panelStyle]="{ overflow: 'auto' }"
              (onChange)="changeBranch($event)"
            >
              <ng-template let-option pTemplate="item">
                <span style="width: 85%; float: left">{{
                  option.BranchName
                }}</span>
              </ng-template>
            </p-dropdown>
          </div>
          <div class="col-lg-3 col-md-3"></div>
          <div class="col-lg-6 col-md-6 mt-md-4">
            <ng-container>
              <Button
                type="button"
                id="btnviewlist"
                Class="btn primary-button-color btnFix mx-2"
                (click)="PintPreSalesReport()"
                >Preview / Print</Button
              >

              <Button
                type="button"
                id="btnviewlist"
                Class="btn primary-button-color btnFix mx-2"
                (click)="LoadPreSalesData()"
                >View List</Button
              >
              <Button
                type="button"
                id="btnviewlist"
                Class="btn primary-button-color btnFix mx-2"
                (click)="RefreshVouchersList()"
                >Refresh</Button
              >
            </ng-container>
          </div>
        </div>
      </div>
    </form>

    <div class="col-lg-12 col-md-12 mt-3">
      <div class="table-responsive card-wrapper custom-table">
        <table class="table table-striped table-borderless">
          <thead>
            <tr>
              <th scope="col">Lead Name</th>
              <th scope="col">Start Date</th>
              <th scope="col">Closing Date</th>
              <th scope="col">Potential Amount</th>
              <th scope="col">Gross Profit Percentage</th>
              <th scope="col">Total Amount</th>
              <th scope="col">Status</th>
              <th scope="col">Employee Name</th>
              <th scope="col">Lead Percentage</th>
              <th scope="col">Party Name</th>
              <th scope="col">Period</th>
              <th scope="col">Stage Percentage</th>
              <!-- <th scope="col" class="text-center">Action</th> -->
            </tr>
          </thead>
          <hr />
          <tbody>
            <tr *ngFor="let item of psResponse$">
              <td>{{ item.LeadName }}</td>
              <td>{{ item.StartDate | date : "MMM-d-y" }}</td>
              <td>{{ item.ClosingDate | date : "MMM-d-y" }}</td>
              <td>{{ item.PotentialAmount }}</td>
              <td>{{ item.GrossProfitPercentage }}</td>
              <td>{{ item.TotalAmount }}</td>
              <td>{{ item.StatusTitle }}</td>
              <td>{{ item.EmployeeName }}</td>
              <td>{{ item.LeadPercentage }}</td>
              <td>{{ item.PartyName }}</td>
              <td>{{ item.Period }}</td>
              <td>{{ item.StagePercentage }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="loading-popup" *ngIf="loading">
    <div class="overlay"></div>
    <div class="popup">
      <div class="spinner"></div>
      <p class="text-center mt-2 mb-0">Report Generating</p>
    </div>
  </div>
</div>
